{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios'\n\nconst URL = \"https://pixabay.com/api/\";\nconst API_KEY = '44783879-183c1ceb2e13ce0ff75e5d5ac';\n\nexport async function getPicturesByQuery(query, page = 1, perPage = 15) {\n  try {\n      const response = await axios.get(URL, {\n          params: {\n              key: API_KEY,\n              q: query,\n              image_type: 'photo',\n              orientation: 'horizontal',\n              safesearch: 'true',\n              page,\n              per_page: perPage,\n          },\n      });\n      return response.data;\n  } catch (error) {\n      console.error(error);\n      throw error;\n  }\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector(\".gallery\");\n\nexport function createGallery(images) {\n\n    const markup = images.map(\n        ({\n            webformatURL,\n            largeImageURL,\n            tags,\n            likes,\n            views,\n            comments,\n            downloads,\n        }) => {\n            return `<div class=\"gallery-images\">\n                        <a href=\"${largeImageURL}\">\n                            <img class=\"gallery-img\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n                        </a>\n                        <div class=\"info-image\">\n                            <p class=\"info-item\">Likes: <span class=\"info-value\">${likes}</span></p>\n                            <p class=\"info-item\">Views: <span class=\"info-value\">${views}</span></p>\n                            <p class=\"info-item\">Comments: <span class=\"info-value\">${comments}</span></p>\n                            <p class=\"info-item\">Downloads: <span class=\"info-value\">${downloads}</span></p>\n                        </div>\n                    </div>`;\n        }\n    ).join('');\n    gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nexport function clearGallery() {\n    gallery.innerHTML = '';\n}","import {getPicturesByQuery} from './js/pixabay-api';\nimport {createGallery, clearGallery} from './js/render-functions';\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst searchForm = document.querySelector('.search-form');\nconst gallery = document.querySelector(\".gallery\");\nconst loadMoreBtn = document.querySelector('.load-more');\nconst loader = document.querySelector('.loader');\n\nlet query = '';\nlet page = 1;\nlet perPage = 15;\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    searchForm.addEventListener('submit', handleSearch);\n    loadMoreBtn.addEventListener('click', loadMorePictures);\n    loadMoreBtn.style.display = 'none';\n});\n\nasync function handleSearch(event) {\n    event.preventDefault();\n\n    query = event.currentTarget.elements.query.value.trim().toLowerCase();\n\n    if (!query) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Please enter a search query.',\n        });\n        return;\n    }\n\n    clearGallery();\n    page = 1;\n    loadMoreBtn.style.display = 'none';\n\n    showLoader();\n\n    try {\n        const data = await getPicturesByQuery(query, page, perPage);\n        if (data.hits.length === 0) {\n            iziToast.info({\n                title: 'Info',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n            });\n        } else {\n            createGallery(data.hits);\n            if (data.hits.length < data.totalHits) {\n                loadMoreBtn.style.display = 'block';\n            }\n        }\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'An error occurred while fetching data. Please try again later.',\n        });\n    } finally {\n        hideLoader();\n        searchForm.reset();\n    }\n}\n\nasync function loadMorePictures() {\n    page += 1;\n    showLoader();\n\n    try {\n        const data = await getPicturesByQuery(query, page, perPage);\n        createGallery(data.hits);\n\n        const { height: cardHeight } = gallery.firstElementChild.getBoundingClientRect();\n        \n        createGallery(data.hits);\n\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: 'smooth'\n        });\n\n        if (page * perPage >= data.totalHits) {\n            iziToast.info({\n                title: 'Info',\n                message: \"We're sorry, but you've reached the end of search results.\",\n            });\n            loadMoreBtn.style.display = 'none';\n        }\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'An error occurred while fetching data. Please try again later.',\n        });\n    } finally {\n        hideLoader();\n    }\n}\n\nfunction showLoader() {\n    loader.style.display = 'block';\n}\n\nfunction hideLoader() {\n    loader.style.display = 'none';\n}"],"names":["URL","API_KEY","getPicturesByQuery","query","page","perPage","axios","error","gallery","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","searchForm","loadMoreBtn","loader","handleSearch","loadMorePictures","event","iziToast","showLoader","data","hideLoader","cardHeight"],"mappings":"wvBAEA,MAAMA,EAAM,2BACNC,EAAU,qCAET,eAAeC,EAAmBC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CACtE,GAAI,CAYA,OAXiB,MAAMC,EAAM,IAAIN,EAAK,CAClC,OAAQ,CACJ,IAAKC,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAAC,EACA,SAAUC,CACb,CACX,CAAO,GACe,IACnB,OAAQE,EAAO,CACZ,cAAQ,MAAMA,CAAK,EACbA,CACT,CACH,CCpBA,MAAMC,EAAU,SAAS,cAAc,UAAU,EAE1C,SAASC,EAAcC,EAAQ,CAElC,MAAMC,EAASD,EAAO,IAClB,CAAC,CACG,aAAAE,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACZ,IACmB;AAAA,mCACgBL,CAAa;AAAA,4DACYD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,mFAGHC,CAAK;AAAA,mFACLC,CAAK;AAAA,sFACFC,CAAQ;AAAA,uFACPC,CAAS;AAAA;AAAA,2BAIhG,EAAM,KAAK,EAAE,EACTV,EAAQ,mBAAmB,YAAaG,CAAM,CAClD,CAEO,SAASQ,GAAe,CAC3BX,EAAQ,UAAY,EACxB,CC1BA,MAAMY,EAAa,SAAS,cAAc,cAAc,EAClDZ,EAAU,SAAS,cAAc,UAAU,EAC3Ca,EAAc,SAAS,cAAc,YAAY,EACjDC,EAAS,SAAS,cAAc,SAAS,EAE/C,IAAInB,EAAQ,GACRC,EAAO,EACPC,EAAU,GAEd,SAAS,iBAAiB,mBAAoB,IAAM,CAChDe,EAAW,iBAAiB,SAAUG,CAAY,EAClDF,EAAY,iBAAiB,QAASG,CAAgB,EACtDH,EAAY,MAAM,QAAU,MAChC,CAAC,EAED,eAAeE,EAAaE,EAAO,CAK/B,GAJAA,EAAM,eAAc,EAEpBtB,EAAQsB,EAAM,cAAc,SAAS,MAAM,MAAM,OAAO,cAEpD,CAACtB,EAAO,CACRuB,EAAS,MAAM,CACX,MAAO,QACP,QAAS,8BACrB,CAAS,EACD,MACH,CAEDP,IACAf,EAAO,EACPiB,EAAY,MAAM,QAAU,OAE5BM,IAEA,GAAI,CACA,MAAMC,EAAO,MAAM1B,EAAmBC,EAAOC,EAAMC,CAAO,EACtDuB,EAAK,KAAK,SAAW,EACrBF,EAAS,KAAK,CACV,MAAO,OACP,QAAS,0EACzB,CAAa,GAEDjB,EAAcmB,EAAK,IAAI,EACnBA,EAAK,KAAK,OAASA,EAAK,YACxBP,EAAY,MAAM,QAAU,SAGvC,MAAe,CACZK,EAAS,MAAM,CACX,MAAO,QACP,QAAS,gEACrB,CAAS,CACT,QAAc,CACNG,IACAT,EAAW,MAAK,CACnB,CACL,CAEA,eAAeI,GAAmB,CAC9BpB,GAAQ,EACRuB,IAEA,GAAI,CACA,MAAMC,EAAO,MAAM1B,EAAmBC,EAAOC,EAAMC,CAAO,EAC1DI,EAAcmB,EAAK,IAAI,EAEvB,KAAM,CAAE,OAAQE,CAAU,EAAKtB,EAAQ,kBAAkB,wBAEzDC,EAAcmB,EAAK,IAAI,EAEvB,OAAO,SAAS,CACZ,IAAKE,EAAa,EAClB,SAAU,QACtB,CAAS,EAEG1B,EAAOC,GAAWuB,EAAK,YACvBF,EAAS,KAAK,CACV,MAAO,OACP,QAAS,4DACzB,CAAa,EACDL,EAAY,MAAM,QAAU,OAEnC,MAAe,CACZK,EAAS,MAAM,CACX,MAAO,QACP,QAAS,gEACrB,CAAS,CACT,QAAc,CACNG,GACH,CACL,CAEA,SAASF,GAAa,CAClBL,EAAO,MAAM,QAAU,OAC3B,CAEA,SAASO,GAAa,CAClBP,EAAO,MAAM,QAAU,MAC3B"}